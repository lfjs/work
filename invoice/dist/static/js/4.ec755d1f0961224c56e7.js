webpackJsonp([4],{"9czT":function(t,e,a){t.exports=a.p+"static/img/no_img.2201826.png"},a2sO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("aMQM"),o=a("wSez"),n={data:function(){return{noImg:a("9czT"),id:this.$route.query.id,value:"",username:"",popupVisible:!1,pageData:"",fullUrl:"",baiduLogo:"https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo_top_86d58ae1",pdfUrl:""}},computed:{testUrl:function(){return this.pageData+".jpg"},baiduUrl:function(){return this.pageData?this.baiduLogo+".png":this.noImg}},methods:{getImgUrl:function(t){return t},checkInfo:function(){console.log(this.popupVisible=!this.popupVisible)},download:function(){console.log();var t=this.pageData,e=(new Date).getTime()+".txt",a=new Blob([t]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,e);else{var i=document.createElement("a");i.download=e,i.href=URL.createObjectURL(a),i.click(),URL.revokeObjectURL(i.href)}Object(o.Toast)({message:"操作成功",duration:1e3})}},mounted:function(){},deactivated:function(){this.$indicator.close(),this.pageData=""},activated:function(){var t=this;this.id=this.$route.query.id,this.$indicator.open({text:"加载中...",spinnerType:"fading-circle"}),console.log("开始请求",performance.now());var e=performance.now();this.axios.post(this.gData.api+"/invioceController/downLoadInvoice?fplsh="+this.id,{}).then(function(a){console.log(a.data,performance.now()-e),setTimeout(function(){if(t.$indicator.close(),"01"===a.data.respcod){t.pageData=a.data.data,console.log(a.data.data+".jpg"),t.fullUrl=t.pageData+".jpg";var e=t.pageData.replace(/\/png\//g,"/pdf/");t.pdfUrl=e+".pdf",t.$forceUpdate()}else Object(o.Toast)({message:a.data.respmsg+"，请重试",duration:1500})},0)}).catch(function(t){console.log(t)})},components:{invoiceHeader:i.a}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("invoiceHeader",{attrs:{titleName:t.$t("main.digitalInvoice")}}),t._v(" "),t.gData.debug?a("div",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.$data))]):t._e(),t._v(" "),t.gData.debug?a("div",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.gData))]):t._e(),t._v(" "),t.gData.debug?a("div",{staticStyle:{"font-size":"16px"}},[t._v("----fullUrl："+t._s(t.fullUrl))]):t._e(),t._v(" "),t.gData.debug?a("div",{staticStyle:{"font-size":"16px"}},[t._v("----pdfUrl："+t._s(t.pdfUrl))]):t._e(),t._v(" "),t.gData.debug?a("div",{staticStyle:{"font-size":"16px"}},[t._v("----testUrl："+t._s(t.testUrl))]):t._e(),t._v(" "),t.gData.debug?a("div",{staticStyle:{"font-size":"16px"}},[t._v("----baiduUrl："+t._s(t.baiduUrl))]):t._e(),t._v(" "),t.gData.isAndroid&&!t.gData.isiOS?a("img",{staticClass:"digital",staticStyle:{width:"100%"},attrs:{src:t.testUrl,alt:""}}):t._e(),t._v(" "),!t.gData.isAndroid&&t.gData.isiOS?a("iframe",{staticStyle:{"background-color":"transparent",position:"absolute","z-index":"-1",width:"100%",height:"100%",top:"0",left:"0"},attrs:{src:t.pdfUrl,frameborder:"0",scrolling:"no"}}):t._e(),t._v(" "),a("div",{staticClass:"mainPadding"})],1)},staticRenderFns:[]},r=a("C7Lr")(n,s,!1,null,null,null);e.default=r.exports}});