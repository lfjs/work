webpackJsonp([2],{PMDa:function(t,a){},d5v4:function(t,a){t.exports="data:image/png;base64,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"},rKun:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("3cXf"),s=e.n(i),o=e("aMQM"),c=e("wSez"),n={data:function(){return{id:this.$route.query.id,popupVisible:!1,cho:!1,allPrice:0,allCount:0,tickets:[1,2],choosenImg:e("n3ny"),unchoosenImg:e("d5v4"),apiData:{},pageData:{},debugInfo:{},debugDate:"",listInUrl:[]}},mounted:function(){},activated:function(){var t=this;this.id=this.$route.query.nfc,this.$indicator.open({text:"加载中...",spinnerType:"fading-circle"}),this.pageData=[],this.listInUrl=[],this.gData.fakeData?(console.log("fakeDataMode!"),this.axios.get("/static/fakeInvoice30List.json?page="+this.apiData.page,{}).then(function(a){t.$indicator.close(),t.pageData=a.data.data,t.debugInfo=a.data,console.log(a.data.data.orderList,0===a.data.data.orderList.length),0===a.data.data.orderList.length&&Object(c.Toast)({message:"暂无可开票行程",duration:2e3})}).catch(function(a){t.$indicator.close(),console.log(a),t.debugInfo=a})):this.axios.post(this.gData.api+"/invioceController/getUnInvoiceRecordList?token="+this.gData.token+"&cardType="+this.id+"&deviceCoding="+this.gData.code,{}).then(function(a){console.log(a.data),t.debugInfo=a.data,"01"===a.data.respcod?(t.$indicator.close(),t.pageData=a.data.data,console.log(a.data.data.orderList,0===a.data.data.orderList.length),0===a.data.data.orderList.length&&Object(c.Toast)({message:"暂无可开票行程",duration:2e3})):(t.$indicator.close(),Object(c.Toast)({message:a.data.respmsg,duration:2e3}))}).catch(function(a){t.$indicator.close(),console.log(a),t.debugInfo=a,Object(c.Toast)({message:a,duration:1500})})},deactivated:function(){this.$indicator.close(),this.allPrice=0,this.allCount=0,this.cho=!1,console.log("deactivated")},methods:{checkAll:function(){for(var t in this.allPrice=0,this.allCount=0,this.pageData.orderList)if(this.pageData.orderList[t].checked&&(this.allPrice+=parseInt(this.pageData.orderList[t].payAmount),this.allCount+=1),Number(t)===Number(this.pageData.orderList.length-1))break;this.$forceUpdate()},pickTicket:function(t,a){for(var e in t.checked?t.checked=!t.checked:t.checked=!0,this.pageData.orderList){if(!this.pageData.orderList[e].checked){this.cho=!1;break}this.cho=!0}this.checkAll()},pickAll:function(){if(this.checkAll(),this.cho){for(var t in this.pageData.orderList)this.pageData.orderList[t].checked=!1;this.cho=!1}else{for(var a in this.pageData.orderList)this.pageData.orderList[a].checked=!0;this.cho=!0}this.checkAll()},stratMake:function(){if(0!==this.allCount&&0!==this.allPrice){for(var t in this.gData.checked30List=[],this.listInUrl=[],this.$store.dispatch("resetListInVuex"),this.pageData.orderList)if(this.pageData.orderList[t].checked&&(this.gData.checked30List.push(this.pageData.orderList[t]),this.listInUrl.push(this.pageData.orderList[t]),this.$store.dispatch("setListInVuex",this.pageData.orderList[t])),Number(t)===Number(this.pageData.orderList.length-1))break;var a=s()(this.listInUrl);this.listInUrl=a,this.popupVisible=!this.popupVisible,console.log("checked",this.gData.checked30List)}},kindOf:function(t){switch(console.log(t.target.id),this.popupVisible=!1,t.target.id){case"digital":this.$router.push({path:"/fillMake",query:{type:"1",fee:this.allPrice}}),this.$store.dispatch("setAutoFillVuex",!0);break;case"paper":this.$router.push({path:"/fillPaperMake",query:{type:"2",fee:this.allPrice}})}}},components:{invoiceHeader:o.a}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("invoiceHeader",{attrs:{titleName:t.$t("main.makeInvoice")}}),t._v(" "),e("div",{staticClass:"pageTopNotice"},[t._v("只能开取近一个月的行程发票")]),t._v(" "),t.gData.debug?e("div",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.$data))]):t._e(),t._v(" "),t.gData.debug?e("div",{staticStyle:{"font-size":"16px"}},[t._v("----getListInVuex: "+t._s(t.$store.getters.getListInVuex))]):t._e(),t._v(" "),t.gData.debug?e("div",{staticStyle:{"font-size":"16px"}},[t._v("----getMoreInfoVuex: "+t._s(t.$store.getters.getMoreInfoVuex))]):t._e(),t._v(" "),e("div",{staticClass:"ticketCon"},[t._l(t.pageData.orderList,function(a,i){return e("div",{key:i,staticClass:"ticket",on:{click:function(e){return t.pickTicket(a,i)}}},[e("div",[e("div",{staticClass:"time"},[t._v(t._s(t._f("date")(a.entryDate))+"-"+t._s(t._f("dateTimeOnly")(a.exitDate)))]),t._v(" "),e("div",{staticClass:"info"},[e("img",{staticClass:"choosen",attrs:{src:a.checked?t.choosenImg:t.unchoosenImg,alt:""}}),t._v(" "),e("div",{staticClass:"station"},[e("div",[t._m(0,!0),t._v(t._s(a.entryStationName))]),t._v(" "),e("div",[e("i",{staticClass:"end"}),t._v(t._s(a.exitStationName))])]),t._v(" "),e("div",{staticClass:"price"},[e("span",[t._v(t._s(t._f("yuan")(a.payAmount)))]),t._v(" 元")])])])])}),t._v(" "),e("div",{staticClass:"noMore"},[t._v("没有更多数据了")])],2),t._v(" "),e("div",{staticClass:"ticketFooter",style:{"padding-bottom":t.gData.bottom?t.gData.bottom+"px":""}},[e("div",{staticClass:"info",on:{click:t.pickAll}},[e("img",{attrs:{src:t.cho?t.choosenImg:t.unchoosenImg,alt:""}}),t._v(" "),e("div",[e("div",[t._v("全选")]),t._v(" "),e("div",{staticClass:"count"},[e("span",[t._v(t._s(t.allCount))]),t._v(" 个行程 共"),e("span",[t._v(" "+t._s(t._f("yuan")(t.allPrice))+" ")]),t._v("元\n          ")])])]),t._v(" "),e("mt-button",{class:0===t.allCount||0===t.allPrice?"disabled":"",attrs:{type:"default"},on:{click:t.stratMake}},[t._v("开具发票")])],1),t._v(" "),e("mt-popup",{staticClass:"startPop",attrs:{"popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(a){t.popupVisible=a},expression:"popupVisible"}},[e("div",[e("div",{staticClass:"popHead"},[t._v("选择开票类型")]),t._v(" "),e("div",{staticClass:"hr"}),t._v(" "),e("div",{staticClass:"popCon"},[e("div",{staticClass:"popInfo"},[t._v("电子发票与纸质发票具有同等的法律效力，均可支持报销")]),t._v(" "),e("mt-button",{staticClass:"mainButton",attrs:{id:"digital",type:"default"},on:{click:t.kindOf}},[t._v("开具电子发票")]),t._v(" "),e("mt-button",{staticClass:"subButton",attrs:{id:"paper",type:"default"},on:{click:t.kindOf}},[t._v("开具纸质发票")])],1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("i",{staticClass:"start"},[a("span")])}]};var d=e("C7Lr")(n,r,!1,function(t){e("PMDa")},"data-v-6cfe90db",null);a.default=d.exports}});